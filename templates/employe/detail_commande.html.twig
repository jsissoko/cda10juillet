{% extends 'base.html.twig' %}

{% block title %}Détail de la Commande{% endblock %}

{% block body %}
<div class="container">
    <h1>Détail de la Commande #{{ commande.id }}</h1>
    <p>Date de la commande: {{ commande.date|date('d/m/Y') }}</p>
    <p>Status: {{ commande.status }}</p>
 <p>Adresse de livraison: {{ commande.numeroRue }} {{ commande.nomRue }}, {{ commande.ville }}, {{ commande.pays }}</p>

    <h2>Produits commandés</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Produit</th>
                <th>Quantité</th>
                <th>Prix unitaire</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for ligne in commande.commandeLignes %}
            <tr>
                <td>{{ ligne.produit.nom }}</td>
                <td>{{ ligne.quantite }}</td>
                <td>{{ ligne.prix|number_format(2, '.', ',') }} €</td>
                <td>{{ ligne.quantite * ligne.prix|number_format(2, '.', ',') }} €</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% set total = 0 %}
{% for ligne in commande.commandeLignes %}
    {% set total = total + (ligne.prix * ligne.quantite) %}
{% endfor %}

<h3>Total de la commande: {{ total }} €</h3>



    <a href="{{ path('employe_index') }}" class="btn btn-primary">Retour à la liste des commandes</a>
</div>
{% endblock %}
